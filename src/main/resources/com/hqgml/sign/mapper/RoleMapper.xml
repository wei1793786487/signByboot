<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hqgml.sign.mapper.RoleMapper">
    <sql id="Base_Column_List">
	id,
	role_name,
	`describe`
</sql>
    <resultMap id="BaseResultMap" type="com.hqgml.sign.pojo.Role">
        <!--@mbg.generated generated on Wed Apr 15 07:56:16 CST 2020.-->
        <!--@Table role-->
        <result column="id" jdbcType="INTEGER" property="id"/>
        <result column="role_name" jdbcType="VARCHAR" property="roleName"/>
        <result column="describe" jdbcType="VARCHAR" property="describe"/>
    </resultMap>

    <!--auto generated by MybatisCodeHelper on 2020-04-15-->
    <select id="selectByUserId" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from role where id in (select role_id from user_role where user_id=#{id,jdbcType=INTEGER})
    </select>

    <!--auto generated by MybatisCodeHelper on 2020-04-22-->
    <select id="selectAllByMetaId" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from role where id in (select role_id from role_meta where meta_id=#{id,jdbcType=INTEGER})
    </select>

    <!--auto generated by MybatisCodeHelper on 2020-07-03-->

    <!--auto generated by MybatisCodeHelper on 2020-07-03-->
    <delete id="deleteById">
        delete from role
        where id=#{id,jdbcType=INTEGER}
    </delete>

    <!--auto generated by MybatisCodeHelper on 2020-07-03-->
    <select id="selectAll" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from role
        <if test="roleName != null and roleName != ''">
            where role_name like concat('%', #{roleName,jdbcType=VARCHAR},'%')
        </if>
    </select>

    <!--auto generated by MybatisCodeHelper on 2020-07-04-->
    <select id="desRole">
        insert into role_meta(role_id,meta_id) values (#{rid},#{mid})
    </select>

    <!--auto generated by MybatisCodeHelper on 2020-07-05-->
    <select id="selectAllById" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM role WHERE id IN(SELECT role_id FROM role_meta WHERE meta_id =#{id,jdbcType=INTEGER})
    </select>

    <!--auto generated by MybatisCodeHelper on 2020-07-05-->
    <delete id="cleanRole">
        delete from role_meta
        where meta_id=#{mid,jdbcType=INTEGER}
    </delete>

    <!--auto generated by MybatisCodeHelper on 2020-07-22-->
    <select id="findById" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from role
        where id=#{id,jdbcType=INTEGER}
    </select>

    <!--auto generated by MybatisCodeHelper on 2020-07-22-->

    <!--auto generated by MybatisCodeHelper on 2020-07-22-->

    <!--auto generated by MybatisCodeHelper on 2020-07-22-->
    <insert id="insertList">
        INSERT INTO role(
        id,
        role_name,
        describe
        )VALUES
        <foreach collection="list" item="element" index="index" separator=",">
            (
            #{element.id,jdbcType=INTEGER},
            #{element.roleName,jdbcType=VARCHAR},
            #{element.describe,jdbcType=VARCHAR}
            )
        </foreach>
    </insert>

    <!--auto generated by MybatisCodeHelper on 2020-07-22-->
    <insert id="insertSelective">

        INSERT INTO `meeting`.`role`( `role_name`, `describe`)
        VALUES ( #{roleName,jdbcType=VARCHAR},
        #{describe,jdbcType=VARCHAR})

    </insert>

<!--auto generated by MybatisCodeHelper on 2020-07-22-->
    <update id="updateById">
     UPDATE `meeting`.`role`
        SET `role_name` =
        #{param1.roleName,jdbcType=VARCHAR},
        `describe` = #{param1.describe,jdbcType=VARCHAR}
        WHERE `id` = #{id,jdbcType=INTEGER}
    </update>


</mapper>